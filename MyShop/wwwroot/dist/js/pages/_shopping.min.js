(async function () { let a = await import("./_layout.js"); a.topMenuFunction(), a.mobileMenuCategoryNavigation(), a.menuCategoryNavigation(), a.passwordVisible(), a.convertPersianNumbersToEnglish() })(); import { setComma, ajaxLoader, persianNumberParse, lazyLoading, clickButonEffect, preventWriteString } from "./_layout.js"; persianNumberParse(), lazyLoading(), clickButonEffect(), preventWriteString(), async function () { let a = await import("../components/_wavebutton.js"); a.waveButton(), a.ripple() }(), async function a() { let a = document.querySelectorAll(".delete-order"); return !!a && void a.forEach(a => { a.addEventListener("click", () => { let b = a.getAttribute("data-id"); document.querySelector("#delete--modal").querySelector("input[name=\"orderId\"]").value = b }, !1) }) }(); let isDoneCounterChanged = !0; function errorHandling(a) { console.log(a), isDoneCounterChanged = !0 } (function () { let a = document.querySelectorAll(".increase-order"); return !!a && void a.forEach(a => { a.addEventListener("click", b => { if (console.log(isDoneCounterChanged), b.stopPropagation(), b.preventDefault(), !isDoneCounterChanged) return !1; isDoneCounterChanged = !1; let c = a.getAttribute("data-id"), d = a.parentElement, e = d.querySelector(".order-count"), f = +e.value, g = document.querySelectorAll(".order-price"), h = 0; ajaxLoader("POST", "/Shopping/IncreaseOrder", `orderId=${c}`, errorHandling, function (a) { if (-2 === a) return void UIkit.notification({ message: "<span class= \"margin-right-10 position-relative\" uk-icon=\"icon:bell;ratio:1.2\"><span class=\"dana-font fontsize-14\" dir=\"rtl\">Sorry, there is not any more in stock</span>", status: "primary", pos: "top-center", timeout: 3e3 }); persianNumberParse(), e.value = f + 1, e.setAttribute("data-count", f + 1); let b = document.querySelector(`.order-price[data-id="${c}"]`); b.innerHTML = setComma(a), b.setAttribute("data-price", a); let d = document.querySelectorAll(".order-count"), i = 0; d.forEach(a => { i += +a.value }), document.querySelector(".orders-count").innerHTML = `(${i})`, g.forEach(a => { h += +a.getAttribute("data-price") }); let j = document.querySelectorAll(".total-price"); return j.forEach(a => { a.innerHTML = setComma(h) }), persianNumberParse(), isDoneCounterChanged = !0, !0 }, null, !0) }, !1) }) })(), function () { let a = document.querySelectorAll(".decrease-order"); return !!a && void a.forEach(a => { a.addEventListener("click", b => { if (console.log(isDoneCounterChanged), b.stopPropagation(), b.preventDefault(), !isDoneCounterChanged) return !1; isDoneCounterChanged = !1; let c = a.getAttribute("data-id"), d = a.parentElement, e = d.querySelector(".order-count"), f = +e.value; if (2 > f) return isDoneCounterChanged = !0, !1; let g = document.querySelectorAll(".order-price"), h = 0; ajaxLoader("POST", "/Shopping/DecreaseOrder", `orderId=${c}`, errorHandling, function (a) { e.value = f - 1, e.setAttribute("data-count", f - 1); let b = document.querySelector(`.order-price[data-id="${c}"]`); b.innerHTML = setComma(a), b.setAttribute("data-price", a); let d = document.querySelectorAll(".order-count"), i = 0; d.forEach(a => { i += +a.value }), document.querySelector(".orders-count").innerHTML = `(${Math.abs(i)})`, g.forEach(a => { h += +a.getAttribute("data-price") }); let j = document.querySelectorAll(".total-price"); return j.forEach(a => { a.innerHTML = setComma(Math.abs(h)) }), persianNumberParse(), isDoneCounterChanged = !0, !0 }, null, !0) }, !1) }) }(), function () { let a = document.querySelectorAll("input.order-count"); return !!a && void a.forEach(a => { a.addEventListener("keydown", a => { if (console.log(isDoneCounterChanged), !isDoneCounterChanged) return a.stopPropagation().e.preventDefault(), !1 }, !1), a.addEventListener("keyup", b => { if (console.log(isDoneCounterChanged), !isDoneCounterChanged) return b.stopPropagation().e.preventDefault(), !1; isDoneCounterChanged = !1; let c = a.getAttribute("data-id"), d = +a.value; if (2 > d) return isDoneCounterChanged = !0, a.value = a.getAttribute("data-count"), !1; let e = document.querySelectorAll(".order-price"), f = 0; ajaxLoader("POST", "/Shopping/ChangeOrderNumber", `orderId=${c}&number=${d}`, errorHandling, function (b) { if (-2 === b) return void UIkit.notification({ message: "<span class= \"margin-right-10 position-relative\" uk-icon=\"icon:bell;ratio:1.2\"><span class=\"dana-font fontsize-14\" dir=\"rtl\">Sorry, there is not any more in stock</span>", status: "primary", pos: "top-center", timeout: 3e3 }); a.setAttribute("data-count", d); let g = document.querySelector(`.order-price[data-id="${c}"]`); g.innerHTML = setComma(b), g.setAttribute("data-price", b); let h = document.querySelectorAll(".order-count"), i = 0; h.forEach(a => { i += +a.value }), document.querySelector(".orders-count").innerHTML = `(${Math.abs(i)})`, e.forEach(a => { f += +a.getAttribute("data-price") }); let j = document.querySelectorAll(".total-price"); return j.forEach(a => { a.innerHTML = setComma(Math.abs(f)) }), persianNumberParse(), isDoneCounterChanged = !0, !0 }, null, !0) }, !1) }) }(), (async () => { let a = document.querySelectorAll(".address-form-modal"); if (!a) return !1; a.forEach(a => { let b = a.querySelector("select[name=\"StateId\"]"), c = a.querySelector("select[name=\"CityId\"]"), d = a.querySelector(".city-selectbox-button"); b.addEventListener("change", () => { b.setAttribute("disabled", "disabled"), c.setAttribute("disabled", "disabled"), d.innerHTML = "Loading ..."; let a = `stateId=${b.value}`; ajaxLoader("POST", "/Address/CityList", a, errorHandling, a => (c.innerHTML = a, b.removeAttribute("disabled"), c.removeAttribute("disabled"), d.innerHTML = `<span>${c.querySelector("option:checked").innerHTML}</span><span uk-icon="icon: chevron-down"></span>`, !0), null, !0) }, !1); let e = d => { let e = a.querySelector("input[name=\"ReceiverName\"]").value; if (null !== e && (e = e.trim()), null === e || "" === e) { let b = a.querySelector(".receivername-error"); return b.classList.remove("d-none"), b.innerHTML = "Please enter your full name", d.stopPropagation(), d.preventDefault(), !1 } console.log(e); let f = a.querySelector("input[name=\"ReceiverMobileNumber\"]").value; if (null !== f && (f = f.trim()), null === f || "" === f) { let b = a.querySelector(".receivermobilenumber-error"); return b.innerHTML = "Please enter your mobile number", b.classList.remove("d-none"), d.stopPropagation(), d.preventDefault(), !1 } console.log(f); let g = a.querySelector("input[name=\"PostalCode\"]").value; if (null !== g && (g = g.trim()), null === g || "" === g) { let b = a.querySelector(".postalcode-error"); return b.innerHTML = "Please enter your postal code", b.classList.remove("d-none"), d.stopPropagation(), d.preventDefault(), !1 } console.log(g); let h = a.querySelector("textarea[name=\"Details\"]").value; if (null !== h && (h = h.trim()), null === h || "" === h) { let b = a.querySelector(".details-error"); return b.innerHTML = "Please enter your address's details", b.classList.remove("d-none"), d.stopPropagation(), d.preventDefault(), !1 } console.log(h); let i = b.options[b.selectedIndex].text, j = c.options[c.selectedIndex].text; a.querySelector("input[name=\"StateName\"]").value = i, a.querySelector("input[name=\"CityName\"]").value = j }, f = document.querySelector(".add-address-form__submit-button"); if (!f) return !1; f.addEventListener("click", e, !1); let g = a.querySelector(".edit-address-form__submit-button"); if (!g) return !1; g.addEventListener("click", e, !1); let h = a => { a.classList.add("d-none"), a.innerHTML = "" }, i = a.querySelector("input[name=\"ReceiverName\"]"), j = a.querySelector(".receivername-error"); i.addEventListener("focus", () => { h(j) }, !1); let k = a.querySelector("input[name=\"ReceiverMobileNumber\"]"), l = a.querySelector(".receivermobilenumber-error"); k.addEventListener("focus", () => { h(l) }, !1); let m = a.querySelector("input[name=\"PostalCode\"]"), n = a.querySelector(".postalcode-error"); m.addEventListener("focus", () => { h(n) }, !1); let o = a.querySelector("textarea[name=\"Details\"]"), p = a.querySelector(".details-error"); o.addEventListener("focus", () => { h(p) }, !1) }); let b = document.querySelectorAll(".delete-address-link"), c = document.querySelector("#delete-address--modal"); b.forEach(a => { a.addEventListener("click", () => { let b = a.getAttribute("data-id"); c.querySelector("input[name=\"addressId\"]").value = b }, !1) }); let d = async a => { let b = a.getAttribute("data-id"), c = `selectedAddressId=${b}`; await ajaxLoader("POST", "/Address/BillWithDeliveryPrice", c, errorHandling, a => { let b = document.querySelector(".bill-with-delivery-price-container"); return b.innerHTML = a, persianNumberParse(), !0 }, null, !1); await ajaxLoader("POST", "/Address/TotalPrice", c, errorHandling, a => { let b = document.querySelectorAll(".total-price-container"); b.forEach(b => (b.innerHTML = a, persianNumberParse(), !0)) }, null, !1) }, e = document.querySelectorAll("input[name=\"IsSelectedAddress\"]"); return !!e && void e.forEach(a => { a.addEventListener("change", () => { let b = a.getAttribute("data-id"); ajaxLoader("POST", "/Address/ChangeSelectedAddress", `selectedAddressId=${b}`, errorHandling, () => { d(a), persianNumberParse() }, null, !1) }, !1) }) })(), (async () => { let a = document.querySelectorAll("input[name=\"IsLocalPayment\"]"); if (!a) return !1; a.forEach(a => { a.addEventListener("change", () => { let b = a.getAttribute("data-id"), c = a.value; ajaxLoader("POST", "/Shopping/ChangeIsLocalPayment", `shoppingId=${b}&isLocalPayment=${c}`, errorHandling, a => { a && UIkit.notification({ message: "<span class= \"margin-right-10 position-relative\" uk-icon=\"icon:bell;ratio:1.2\"></span ><span class=\"dana-font fontsize-14\" dir=\"ltr\">Payment Method Changed</span>", status: "primary", pos: "top-center", timeout: 3e3 }) }, null, !1) }, !1) }); let b = document.querySelector(".discount-submit"); if (!b) return !1; let c = a => { let b = a.getAttribute("data-id"), c = `shoppingId=${b}`; ajaxLoader("POST", "/Shopping/FinalBill", c, errorHandling, a => { let b = document.querySelector("#price-summary-container"); b.innerHTML = a, persianNumberParse() }, null, !1); ajaxLoader("POST", "/Shopping/TotalPrice", c, errorHandling, a => { let b = document.querySelectorAll(".total-price"); b.forEach(b => { b.innerHTML = setComma(a), persianNumberParse() }) }, null, !1) }; b.addEventListener("click", a => { a.stopPropagation(), a.preventDefault(); let d = document.querySelector("input[name=\"discountCode\"]").value, e = b.getAttribute("data-id"); ajaxLoader("POST", "/Shopping/UsingDiscountCode", `discountCode=${d}&shoppingId=${e}`, errorHandling, a => { if (console.log(a), "true" === a) { c(b); let a = document.querySelector(".error-discount-code"); a.classList.add("d-none"), a.innerHTML = ""; let d = document.querySelector(".success-discount-code"); d.classList.remove("d-none"), d.innerHTML = "Discount Code Applied", UIkit.notification({ message: "<span class= \"margin-right-10 position-relative\" uk-icon=\"icon:bell;ratio:1.2\"><span class=\"dana-font fontsize-14\" dir=\"rtl\">Discount Code Applied</span>", status: "primary", pos: "top-center", timeout: 3e3 }) } else { c(b); let a = document.querySelector(".error-discount-code"); a.classList.remove("d-none"), a.innerHTML = "Discount code is not valid"; let d = document.querySelector(".success-discount-code"); d.classList.add("d-none"), d.innerHTML = "" } }, null, !1) }, !1) })();